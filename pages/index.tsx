import Head from 'next/head';
import Image from 'next/image';
import homeStyles from '../styles/Home.module.css';
import Link from 'next/link';
import Date from '../components/date';
import profilePic from '../public/images/profile.jpg';
import nextJsLogo from '../public/images/nextJs.svg';
import Alert from '../components/alert';
// Lib
import { getSortedPostsData } from '../lib/posts';

export async function getStaticProps() {
  const allPostsData = getSortedPostsData();
  return {
    props: {
      allPostsData,
    },
  };
}

export interface IProps {
  allPostsData: {
    id: string;
    title: string;
    date: string;
  }[];
}

const Home: React.FC<IProps> = ({ allPostsData }) => {
  // console.log('homepage.allPostsData', allPostsData);

  return (
    <div className='w-screen min-h-screen flex justify-center items-center'>
      <Head>
        <title>Next Blog</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      </Head>

      <main className='text-center w-screen min-h-screen flex flex-col lg:flex-row'>
        <section className='shadow-lg xl:min-h-screen xl:w-1/4'>
          <div className='flex items-center p-3 mb-10'>
            <p className='mr-2'>Built with</p>
            <Image src={nextJsLogo} alt='next js' height={50} width={75} />
          </div>
          <div className='flex flex-col justify-center items-center'>
            <Image
              src={profilePic}
              alt='profile pic'
              className='rounded-full'
              height={200}
              width={200}
            />
          </div>
          <div className='px-10'>
            <h1 className='mt-6 text-4xl font-extrabold'>James Morris</h1>
            <h2 className='text-2xl'>
              React Developer at IronmongeryDirect, Essex
            </h2>
            <div className='my-10 text-xl flex flex-col'>
              <Link href='https://www.jamesleomorris.com'>
                <a target='_blank'>Portfolio</a>
              </Link>
              <Link href='https://github.com/jleomorris'>
                <a target='_blank'>Github</a>
              </Link>
            </div>
          </div>
        </section>
        <section className='bg-gray-100 text-left p-10 sm:p-20 xl:min-h-screen xl:w-3/4'>
          <h2 className='text-6xl mb-10 font-bold'>Blog</h2>
          <ul className='flex flex-wrap justify-start w-full'>
            {allPostsData.map(({ id, date, title }) => (
              <li
                className='bg-white m-2 shadow-md p-5 rounded-xl w-full lg:w-1/4 hover:bg-gray-200'
                key={id}
              >
                <Link href={`/posts/${id}`}>
                  <a className='text-blue-600 font-bold text-2xl'>{title}</a>
                </Link>
                <br />
                <small>
                  <Date dateString={date} />
                </small>
              </li>
            ))}
          </ul>
        </section>
      </main>
    </div>
  );
};

export default Home;
